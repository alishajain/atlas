{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{getYarnIds,addYarnStockDetails}from\"../API/YarnApi\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";// Import useNavigate\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddYarnStockDetails=()=>{const[yarnIds,setYarnIds]=useState([]);const[selectedYarnId,setSelectedYarnId]=useState(\"\");const[date,setDate]=useState(\"\");const[supplierName,setSupplierName]=useState(\"\");const[supplierCity,setSupplierCity]=useState(\"\");const[weight,setWeight]=useState(\"\");const[amount,setAmount]=useState(\"\");const[billNo,setBillNo]=useState(\"\");const[message,setMessage]=useState(\"\");const[loading,setLoading]=useState(false);const userId=useSelector(state=>state.user.userId);const navigate=useNavigate();// Initialize useNavigate\nuseEffect(()=>{// Fetch Yarn IDs when the component mounts\ngetYarnIds().then(data=>{setYarnIds(data.data);// Set the Yarn IDs\n}).catch(error=>{setMessage(\"Error fetching Yarn IDs\");});},[]);// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();setLoading(true);setMessage(\"\");// Clear previous messages\n// Prepare form data\nconst formData={Date:date,YarnId:selectedYarnId,SupplierName:supplierName,SupplierCity:supplierCity,Weight:weight,Amount:amount,BillNo:billNo,UserId:userId};try{const response=await addYarnStockDetails(formData);if(response.success){setMessage(\"Yarn stock details added successfully.\");window.location.reload();}else{setMessage(\"Error adding yarn stock details.\");}}catch(error){setMessage(`Error: ${error.message}`);}finally{setLoading(false);// Reset loading state\n}};// Function to navigate to home\nconst handleBack=()=>{navigate(\"/yarn\");};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Yarn Stock Details\"}),message&&/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",value:date,onChange:e=>setDate(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"yarnId\",children:\"Yarn ID:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"yarnId\",value:selectedYarnId,onChange:e=>setSelectedYarnId(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Yarn ID\"}),yarnIds.map(yarn=>/*#__PURE__*/_jsx(\"option\",{value:yarn.YarnId,children:yarn.YarnId},yarn.YarnId))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"supplierName\",children:\"Supplier Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"supplierName\",value:supplierName,onChange:e=>setSupplierName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"supplierCity\",children:\"Supplier City:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"supplierCity\",value:supplierCity,onChange:e=>setSupplierCity(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"weight\",children:\"Weight:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"weight\",value:weight,onChange:e=>setWeight(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",children:\"Cost:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"amount\",value:amount,onChange:e=>setAmount(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"billNo\",children:\"Bill Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"billNo\",value:billNo,onChange:e=>setBillNo(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"Submitting...\":\"Submit\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,children:\"Back\"})})]});};export default AddYarnStockDetails;","map":{"version":3,"names":["React","useState","useEffect","getYarnIds","addYarnStockDetails","useSelector","useNavigate","jsx","_jsx","jsxs","_jsxs","AddYarnStockDetails","yarnIds","setYarnIds","selectedYarnId","setSelectedYarnId","date","setDate","supplierName","setSupplierName","supplierCity","setSupplierCity","weight","setWeight","amount","setAmount","billNo","setBillNo","message","setMessage","loading","setLoading","userId","state","user","navigate","then","data","catch","error","handleSubmit","e","preventDefault","formData","Date","YarnId","SupplierName","SupplierCity","Weight","Amount","BillNo","UserId","response","success","window","location","reload","handleBack","children","onSubmit","htmlFor","type","id","value","onChange","target","required","map","yarn","disabled","onClick"],"sources":["C:/Users/Bhupesh/OneDrive/Desktop/Alisha/atlas/Atlas-Frontend/src/Components/AddYarnStockDetails.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { getYarnIds, addYarnStockDetails } from \"../API/YarnApi\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\"; // Import useNavigate\r\n\r\nconst AddYarnStockDetails = () => {\r\n  const [yarnIds, setYarnIds] = useState([]);\r\n  const [selectedYarnId, setSelectedYarnId] = useState(\"\");\r\n  const [date, setDate] = useState(\"\");\r\n  const [supplierName, setSupplierName] = useState(\"\");\r\n  const [supplierCity, setSupplierCity] = useState(\"\");\r\n  const [weight, setWeight] = useState(\"\");\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [billNo, setBillNo] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const userId = useSelector((state) => state.user.userId);\r\n\r\n  const navigate = useNavigate(); // Initialize useNavigate\r\n\r\n  useEffect(() => {\r\n    // Fetch Yarn IDs when the component mounts\r\n    getYarnIds()\r\n      .then((data) => {\r\n        setYarnIds(data.data); // Set the Yarn IDs\r\n      })\r\n      .catch((error) => {\r\n        setMessage(\"Error fetching Yarn IDs\");\r\n      });\r\n  }, []);\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage(\"\"); // Clear previous messages\r\n\r\n    // Prepare form data\r\n    const formData = {\r\n      Date: date,\r\n      YarnId: selectedYarnId,\r\n      SupplierName: supplierName,\r\n      SupplierCity: supplierCity,\r\n      Weight: weight,\r\n      Amount: amount,\r\n      BillNo: billNo,\r\n      UserId: userId,\r\n    };\r\n\r\n    try {\r\n      const response = await addYarnStockDetails(formData);\r\n      if (response.success) {\r\n        setMessage(\"Yarn stock details added successfully.\");\r\n        window.location.reload();\r\n      } else {\r\n        setMessage(\"Error adding yarn stock details.\");\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Error: ${error.message}`);\r\n    } finally {\r\n      setLoading(false); // Reset loading state\r\n    }\r\n  };\r\n\r\n  // Function to navigate to home\r\n  const handleBack = () => {\r\n    navigate(\"/yarn\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Add Yarn Stock Details</h2>\r\n\r\n      {message && <p>{message}</p>}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <label htmlFor=\"date\">Date:</label>\r\n          <input\r\n            type=\"date\"\r\n            id=\"date\"\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"yarnId\">Yarn ID:</label>\r\n          <select\r\n            id=\"yarnId\"\r\n            value={selectedYarnId}\r\n            onChange={(e) => setSelectedYarnId(e.target.value)}\r\n            required\r\n          >\r\n            <option value=\"\">Select Yarn ID</option>\r\n            {yarnIds.map((yarn) => (\r\n              <option key={yarn.YarnId} value={yarn.YarnId}>\r\n                {yarn.YarnId}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"supplierName\">Supplier Name:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"supplierName\"\r\n            value={supplierName}\r\n            onChange={(e) => setSupplierName(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"supplierCity\">Supplier City:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"supplierCity\"\r\n            value={supplierCity}\r\n            onChange={(e) => setSupplierCity(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"weight\">Weight:</label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"weight\"\r\n            value={weight}\r\n            onChange={(e) => setWeight(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"amount\">Cost:</label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"amount\"\r\n            value={amount}\r\n            onChange={(e) => setAmount(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"billNo\">Bill Number:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"billNo\"\r\n            value={billNo}\r\n            onChange={(e) => setBillNo(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <button type=\"submit\" disabled={loading}>\r\n            {loading ? \"Submitting...\" : \"Submit\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      {/* Button to navigate to home */}\r\n      <div>\r\n        <button onClick={handleBack}>Back</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddYarnStockDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}